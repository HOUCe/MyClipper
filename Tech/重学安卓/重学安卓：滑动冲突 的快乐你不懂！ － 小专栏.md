---
created: 2021-10-13
source: https://xiaozhuanlan.com/topic/8796215034
author: 
---

# [重学安卓：滑动冲突 的快乐你不懂！ － 小专栏](https://xiaozhuanlan.com/topic/8796215034)


> [往期回顾](https://kunminx.gitbook.io/relearn-android/new_moments/zhong-xue-an-zhuo-liang-zhou-nian-hui-gu-yu-zhan-wang)，**[专栏目录](https://kunminx.gitbook.io/relearn-android/category)**，**[更新动态](https://kunminx.gitbook.io/relearn-android/new_moments)**，[优惠政策](https://kunminx.gitbook.io/relearn-android/ban-quan-sheng-ming#you-hui-zheng-ce)，[版权须知](https://kunminx.gitbook.io/relearn-android/ban-quan-sheng-ming#ban-quan-xu-zhi)
> 
> 温馨提示：如果这是第一次接触《重学安卓》，可通过上述链接来访问和快速了解《重学安卓》专栏、获取它的目录、试读内容，以及了解它的最新动态 和 发展状况。
> 
> 截至目前，专栏已对 **体系化文章** 做了 1970 余次修订，数十位群友告诉我 受专栏的启发 他们也开启了写作之路。群里不定期会有小伙伴讨论适配问题、分享原创的开源库 和 提供内推机会，订阅后可随时进群交流。

·

> Note 2021.5.25 **重要提示**：
> 
> 阅读本文的最佳时机是，**您已吃过** 阅读 “源码” 或 “源码分析文” 时 **找不到头绪的苦**。
> 
> 您还没吃过苦，那您先不要着急阅读本文。您得吃过苦，才会有体会。
> 
> 在您吃够这方面的苦后，您才有机会发现，本文正是专用于解决 “如何找到正确打开方式” 的困扰。
> 
> 我们 **绝不通篇贴源码**，而是基于广泛的实践和反思，在累积过大量样本 乃至足以排除掉所有干扰信息后，**点到为止地揭露 滑动冲突 最为核心的本质**，方便您理解其真实的存在意义，乃至可以笃信地 借助我们在文末提到的妙招 去恰到好处地解决。

## 前言

上一期我们介绍了 “如何正确地思考”、以及 “视图学习” 的两大方向。

相信有些读者在加入该专栏之前，就已经掌握了正确的思考方式；另有些读者，经过 3 个月的见证，也多多少少领悟了深度思考的精髓。

所以对于我的老读者，我是十分有信心通过 “简练的专业表述” 来解释和概括一个技术存在的缘由、它的作用范围，以及与其他技术间的关系。

然而 **每一天都可能有新的读者加入**，所以出于负责任的考虑，从前乃至今后的每一篇，我都尽可能克制 “自嗨式” 的专业表述，力求用 “接地气的话语” 来输出 “深度思考” 的结果，让还没有彻底掌握 “深度思考” 的读者，也能享受 “豁然开朗” 的阅读体验。

## 作为 年复一年 的滑动冲突

视图的标准化 API 这一章，我们主要会介绍 视图的 **坐标系统、属性参数**；**事件分发、滑动冲突**；**视图排版、视图绘制** 等等，

但以我多年的经验来看，“滑动冲突” 是人们眼里最 “高大上”、最 “神秘莫测” 的 **痛点所在**，

可能大家的 “浏览器收藏夹” 里，都添加了不下 10 篇关于 “滑动冲突” 的解读，可这么多年过去了，还是纹丝未动，

> **这是怎么回事呢？**

因为 人们不过是听说，**面试必考**，安卓开发进阶 一定要会处理 滑动冲突，

除此之外，他们 并不知道、也没有去想过：

> 为什么会有滑动冲突、
> 
> 滑动冲突 占整个视图学习的份额 到底是多少、
> 
> 掌握了滑动冲突 能在多大范围内 发挥作用、
> 
> 实际的问题 会不会无边无际、让所学的 变得渺小和失效？……

正是因为 对这些 **必须首先想明白的状况** 不清不楚，使得对 滑动冲突 的学习 **迟迟未能开始**。

再加上，视图的 深度思考知识，至少有一半以上 是 **产品 交互设计 领域** 的知识，所以，除非 事先具备了 深度思考的能力，并且 **出于巧合 顿悟了 交互设计 的精髓**，否则这个大门 可能永远找不到钥匙来打开。

网上那么多文章，通篇贴代码，你看不懂，或者花了很大代价 将代码流程捋顺，**事后却没有留下任何印象**，这不怪你，毕竟 **写这些文章的人 本身也是 完全没有经过思考**，并没有好到哪里去。

所以下面，就请倒掉杯子里的水，带着思考 “为什么” 的心，和我一起 **无痛地理解** 滑动冲突的状况。

## 文章目录一览

-   前言
-   作为 年复一年 的滑动冲突
-   为什么存在 滑动 的设计？
-   **为什么 首页和详情 要如此设计？**
-   所以 为什么存在 滑动冲突？
-   那么 如何解决 这些问题？
-   综上

## 为什么存在 滑动 的设计？

因为 **人们有 浏览信息 的需求**；

并且，**移动设备 屏幕空间较小**，需要使内容可滑动，来实现更大的信息传播量。

关于第一点，其实很好理解，回想一下人们使用移动设备的动机 —— 是的，多是 **漫无目的地浏览 以打发时间**，或是 **如饥似渴地阅读 以增长见识**。

关于第二点，你或许可以反驳，因为就像书籍一样，软件是可以做成翻页的，即，点击按钮，自动翻到下一页，同样能够确保更大的信息量。

> **那为什么要存在 滑动 操作呢？**

因为 —— 还记得 “上一篇末尾” 我们分享的 **屡试不爽的 用户体验目标** 吗 —— 因为滑动 **更符合用户直觉**，滑动 **能够维持操作的连贯性、不打断用户的意图、让用户感觉爽** —— ©KunMinX。

> 👆👆👆 划重点

如果这么说 并没有体会的话，那还是上一篇提到的：**要结合用户使用场景、揣摩用户的 “意图” 和 “心态”，如此才能明白 什么对用户来说是最爽的**。（下文我们会详细交待）

此外，正因为用户多数时间是 “漫无目的地浏览” 以打发时间，所以 **与滑动最紧密相关的，不外乎就是以下两个场景：首页和详情**。

> 👆👆👆 划重点

于是

## 为什么 首页和详情 要如此设计？

还是回到 刚才提到的 屡试不爽的 用户体验目标：**维持连贯性**。

> 首先 我们来看看 首页的设计

—— 为什么像 AppStore 这种，首页要设计成 列表嵌套 Banner 呢？

动图演示

截图1

截图2

![](https://images.xiaozhuanlan.com/photo/2019/642b18d120264c82f7a5a9e783fa1e18.gif)

![](https://images.xiaozhuanlan.com/photo/2019/142c2986dbccef08940f077139a09e35.png)

![](https://images.xiaozhuanlan.com/photo/2019/cc2784f492d2688cbad586b8898611a5.png)

> 图片截自 “Google Play” 客户端

因为在这种场景下，用户通常是 **漫无目的地浏览**、心里想的是 贪得无厌地 大而全地 涉猎一遍、不放过 首页中 任何新奇有趣的东西，所以他们的意图是，**把首页的内容给 “消灭掉”**，

所以，点击进入详情页 对他们来说，**会把工作量指数级增加、会让消灭首页的目标被打断**（因为详情页里面还有更多的软件在推荐，**根本看不过来**），

> 所以在这种场景下，为什么存在 列表嵌套 Banner 的设计 ——

就是为了 让用户不用点击 “查看更多” 增加工作量、而是 保持在首页、并且 **光是通过横向滑动 就能把最值得看的 TOP 20 给浏览一遍**，

如此，既通过 **延续了滑动操作 维持了连贯性**，又让用户保持在首页 而 **没有页面跳转的打断，再次维持了连贯性**，

> —— Double Kill

至此，**从交互设计、用户体验 —— 这个最根源的角度**，我们确知了为什么存在 “列表嵌套 Banner ” 的设计。

> 然后，我们再来看看 详情页

—— 为什么 详情页 多是设计成 **顶部盛放 多媒体控件、中间是 TabLayout、底部是 ViewPager 嵌套 RecyclerView** 呢？

动图演示

截图1

截图2

![](https://images.xiaozhuanlan.com/photo/2019/fd2aab6cfbae67a26241350407c70ded.gif)

![](https://images.xiaozhuanlan.com/photo/2019/b1084db0e22a446a980c7a9cc9c5d4d0.png)

![](https://images.xiaozhuanlan.com/photo/2019/4224b33cc51483c3f7c13c80eb50b3ac.png)

> 图片截自 “酷安” 客户端

先说说顶部。因为 **在列表页 查看 Item 标题 是很心累的**（点击查看内容 有失望的成本，所以需要用心筛选），千篇一律的文字，好不容易找到心仪的，想点进来，那么 此时 **详情页顶部 提供的多媒体元素（例如图片），好比给了用户一个奖励**，

—— 因为 “**一图胜千言**”，图片不像 文字需要通过揣摩来形成画面感，**图片是一看就懂，是给大脑减负、是给大脑的安慰奖励**。

> 👆👆👆 划重点

但除了心理因素外，顶部多媒体元素 没有别的实际作用，因此当它们属于次要元素的情况、当用户开始决定 从底部列表 寻找答案时，**顶部的元素会被顶上去**，暂时隐藏。

> 👆👆👆 划重点

那中部的 TabLayout 为什么被设计为 **粘性浮动** 的呢？

**还是因为连贯性**。

因为 Tab 意味着有多个栏目，例如 详情简介、点赞列表、评论列表 等，那么当用户 **在滑动列表的途中 如果想要切换 Tab**，却因为看不见 Tab 标题 而要 **专门折回顶部去确认**，那就会打断连贯性、让人很不爽。

> 👆👆👆 划重点

所以至此，从用户体验的角度，我们完整确立了对 「为什么 **首页会有 列表嵌套 Banner**、而 **详情会有 多媒体顶部 + 粘性 TabLayout + 底部 ViewPager 嵌套 RecyclerView** 的设计」的认识。

而 **正是这些 优秀的用户体验设计，造成了 从技术角度来看 的滑动冲突**。

> 👆👆👆 划重点

## 所以 为什么存在 滑动冲突？

因为，**早些时候**，

> **为了实现 良好用户体验 的首页**，我们会设计为：RecyclerView 嵌套作为 Adapter Item 的 ViewPager，而二者都是可滑动的控件。
> 
> **为了实现 良好用户体验 的详情**，我们会设计为：ScrollView 嵌套一个 LinearLayout 然后嵌套 顶部 ImageView、中部 TabLayout、底部 ViewPager，以及 ViewPager 中再嵌套 RecyclerView，如此，相当于 ScrollView 嵌套 ViewPager 嵌套 RecyclerView。

所以，到此为止我们确立了，**正是 优秀用户体验 要求的连贯性，导致 可滑动控件 的 多重嵌套 的 设计，从而导致的滑动冲突**。

## 那么 如何解决这些问题呢？

如果解决滑动冲突 非要掌握事件分发不可，那如此普适的用户体验的实现，岂不是 **十分容易出错、并且只掌握在极少数人的手中？**

换言之，正因为 **该用户体验 是如此地普适**，乃至于 **因它而起的 滑动冲突的解决**，必然是有 **超级简单的解决方案** 的！

> 👆👆👆👆👆👆👆👆👆👆 划重点！！！

例如，列表嵌套 Banner 的这种，RecyclerView 自身已解决了 与嵌套视图的滑动冲突，加上现如今 无论是 Banner 还是 ViewPager2，都是采用 RecyclerView + SnapHelper 的实现，双重保证 滑动冲突的不存在。

而像详情页这种，早在 2015 年，Google I/O 推出的 Material Design 套件就给出了 对应的解决方案：通过 CoordinateLayout + AppBarLayout + CollapsingToolbarLayout 来 **完美 协调和解决 滑动冲突、粘性浮动** 等问题。

具体这些控件的使用，我就不细讲了，这里我在 GitHub 上为你找到了 优质的源码 来参考学习：

> 对于 首页 的情况：
> 
> [https://github.com/zhimaochen/SnapHelperDemo](https://github.com/zhimaochen/SnapHelperDemo)
> 
> 对于 详情 的情况：（见 ComplexDetailsPageFragment）
> 
> [https://github.com/xuexiangjys/XUI](https://github.com/xuexiangjys/XUI)

上述两种方案针对的是，**首页、详情**，以及它们的 **变种页面** 的滑动冲突解决方案，

那么除此之外，在 **不去了解 事件分发** 的情况下，还有没有 **通用的 滑动冲突解决方案** 呢？

> 有！同样是在 Android 5.0，引入了 NestedScrollingParent 和 NestedScrollingChild，并在 Android 8.0 的 NestedScrollingParent2 和 NestedScrollingChild2 中解决了滑动延续的问题。
> 
> [https://github.com/sangxiaonian/EasyRefrush](https://github.com/sangxiaonian/EasyRefrush)

我的原则就是 帮大家无痛地理解缘由，至于具体控件的使用，我相信 **在有了上述感性认知、在消除了心中的迷雾后，根本不再是问题**。

## 综上

人们 **年复一年地未能掌握** 滑动冲突，是因为 **从未想明白过**，滑动冲突是怎么回事，

而这又是因为，滑动冲突 **根源的根源，不在技术，而在于产品设计**。

所以，在深度思考 用户在 **使用移动设备的意图** 后，我们知道了 为什么会有 滑动的设计，

并且在 这样的用户意图 背景下，确知了 **最普适的两大场景是 首页和详情**，

而在基于对 作为用户体验目标之一 的 **维持连贯性** 有了深入的理解后，我们理解了为什么会有这样的交互设计，

至此，我们才得以确知：

> 1.正是这样的交互设计，加上事件分发的机制，造成了滑动冲突，
> 
> 2.并且 正由于 首页和详情 是 **两大普适的场景**，使得我们 **只要能 解决这两大场景** 的滑动冲突，就几乎算是 **搞定了绝大部分情况的** 滑动冲突。

于是，针对 首页的情况，我们知道了有 **RecyclerView** 和 **SnapHelper** 这种 **傻瓜式解决方案**。

针对 详情的情况，我们知道了有 **CoordinateLayout + AppBarLayout + CollapsingToolbarLayout** 这种 **傻瓜式解决方案**。

而对于普适的情况，我们知道了有 **NestedScrollingParent2** 和 **NestedScrollingChild2** 这种 **高级一点的 傻瓜式解决方案**。就算不懂事件分发，也能依靠这个来 **绝不含糊地处理 滑动冲突。**

> 是的，整个事情的 **来龙去脉** 就是如此，滑动冲突的场景 **如此地普适**、而 解决方案 又是 **如此之简单**、且 解决滑动冲突 就像是 **解决了 进阶路上的大块头**

—— 是如此 **高性价比** 的知识点

> 👆👆👆👆👆👆👆👆👆👆 划重点！！！

现在你还会犹豫吗？

> **便捷链接：**
> 
> **[基本功：是随时随地可受用的 深度思考原则](https://xiaozhuanlan.com/topic/9837051426)**
> 
> [GitHub : 重学安卓 配套项目](https://github.com/KunMinX/Relearn-Android)
> 
> [GitHub : Jetpack-MVVM-Best-Practice](https://github.com/KunMinX/Jetpack-MVVM-Best-Practice)
> 
> **视图系列文章：**
> 
> [重学安卓：从 0 到 1 “自定义视图” 完整爬坑顺序](https://xiaozhuanlan.com/topic/9361075842)
> 
> [重学安卓：滑动冲突 的快乐你不懂！](https://xiaozhuanlan.com/topic/8796215034)
> 
> [重学安卓：不如我们 从零开始设计一套 视图系统](https://xiaozhuanlan.com/topic/0162375948)
> 
> [重学安卓：百闻不如一见的 视图系统 架构全貌](https://xiaozhuanlan.com/topic/6420935178)
> 
> **[重学安卓：过目难忘 Android GUI 关系梳理](https://xiaozhuanlan.com/topic/2073915486)**
> 
> [重学安卓：一通百通 “声明式 UI” 扫盲干货](https://xiaozhuanlan.com/topic/2356748910)

## 版权声明

> Copyright © 2019-present KunMinX

**本文为专栏私有内容，谢绝转载**。

读者订阅了专栏，即享有了专栏文章的阅读权。

文章 **原创的引言、切入点、思路、结论** 凝聚了作者 KunMinX 本人的心血 及与参与者互动演化的结果，作者本人及作者在文中提名的有效贡献者 对相应的成果享有所有权。

**当您 借鉴或引用文中的引言、切入点、思路、结论 进行二次创作并打算发行时，须注明链接出处**，否则我们保留追责的权利。对此如有疑虑请及时沟通，或在发行前将作品交由本人核对。

当您看见有人 [洗稿](https://baike.baidu.com/item/%E6%B4%97%E7%A8%BF/20862574?fr=aladdin)、[剽窃](https://baike.baidu.com/item/%E5%89%BD%E7%AA%83/9398357?fr=aladdin)、未经授权转载本专栏的文章内容时，请及时向本人举报。

最后感谢您对专栏内容的阅读和喜欢。

> [往期回顾](https://kunminx.gitbook.io/relearn-android/new_moments/zhong-xue-an-zhuo-liang-zhou-nian-hui-gu-yu-zhan-wang)，**[专栏目录](https://kunminx.gitbook.io/relearn-android/category)**，**[更新动态](https://kunminx.gitbook.io/relearn-android/new_moments)**，[优惠政策](https://kunminx.gitbook.io/relearn-android/ban-quan-sheng-ming#you-hui-zheng-ce)，[版权须知](https://kunminx.gitbook.io/relearn-android/ban-quan-sheng-ming#ban-quan-xu-zhi)
> 
> 温馨提示：如果这是第一次接触《重学安卓》，可通过上述链接来访问和快速了解《重学安卓》专栏、获取它的目录、试读内容，以及了解它的最新动态 和 发展状况。
> 
> 截至目前，专栏已对 **体系化文章** 做了 1970 余次修订，数十位群友告诉我 受专栏的启发 他们也开启了写作之路。群里不定期会有小伙伴讨论适配问题、分享原创的开源库 和 提供内推机会，订阅后可随时进群交流。

·

> Note 2021.5.25 **重要提示**：
> 
> 阅读本文的最佳时机是，**您已吃过** 阅读 “源码” 或 “源码分析文” 时 **找不到头绪的苦**。
> 
> 您还没吃过苦，那您先不要着急阅读本文。您得吃过苦，才会有体会。
> 
> 在您吃够这方面的苦后，您才有机会发现，本文正是专用于解决 “如何找到正确打开方式” 的困扰。
> 
> 我们 **绝不通篇贴源码**，而是基于广泛的实践和反思，在累积过大量样本 乃至足以排除掉所有干扰信息后，**点到为止地揭露 滑动冲突 最为核心的本质**，方便您理解其真实的存在意义，乃至可以笃信地 借助我们在文末提到的妙招 去恰到好处地解决。

## 前言

上一期我们介绍了 “如何正确地思考”、以及 “视图学习” 的两大方向。

相信有些读者在加入该专栏之前，就已经掌握了正确的思考方式；另有些读者，经过 3 个月的见证，也多多少少领悟了深度思考的精髓。

所以对于我的老读者，我是十分有信心通过 “简练的专业表述” 来解释和概括一个技术存在的缘由、它的作用范围，以及与其他技术间的关系。

然而 **每一天都可能有新的读者加入**，所以出于负责任的考虑，从前乃至今后的每一篇，我都尽可能克制 “自嗨式” 的专业表述，力求用 “接地气的话语” 来输出 “深度思考” 的结果，让还没有彻底掌握 “深度思考” 的读者，也能享受 “豁然开朗” 的阅读体验。

## 作为 年复一年 的滑动冲突

视图的标准化 API 这一章，我们主要会介绍 视图的 **坐标系统、属性参数**；**事件分发、滑动冲突**；**视图排版、视图绘制** 等等，

但以我多年的经验来看，“滑动冲突” 是人们眼里最 “高大上”、最 “神秘莫测” 的 **痛点所在**，

可能大家的 “浏览器收藏夹” 里，都添加了不下 10 篇关于 “滑动冲突” 的解读，可这么多年过去了，还是纹丝未动，

> **这是怎么回事呢？**

因为 人们不过是听说，**面试必考**，安卓开发进阶 一定要会处理 滑动冲突，

除此之外，他们 并不知道、也没有去想过：

> 为什么会有滑动冲突、
> 
> 滑动冲突 占整个视图学习的份额 到底是多少、
> 
> 掌握了滑动冲突 能在多大范围内 发挥作用、
> 
> 实际的问题 会不会无边无际、让所学的 变得渺小和失效？……

正是因为 对这些 **必须首先想明白的状况** 不清不楚，使得对 滑动冲突 的学习 **迟迟未能开始**。

再加上，视图的 深度思考知识，至少有一半以上 是 **产品 交互设计 领域** 的知识，所以，除非 事先具备了 深度思考的能力，并且 **出于巧合 顿悟了 交互设计 的精髓**，否则这个大门 可能永远找不到钥匙来打开。

网上那么多文章，通篇贴代码，你看不懂，或者花了很大代价 将代码流程捋顺，**事后却没有留下任何印象**，这不怪你，毕竟 **写这些文章的人 本身也是 完全没有经过思考**，并没有好到哪里去。

所以下面，就请倒掉杯子里的水，带着思考 “为什么” 的心，和我一起 **无痛地理解** 滑动冲突的状况。

## 文章目录一览

-   前言
-   作为 年复一年 的滑动冲突
-   为什么存在 滑动 的设计？
-   **为什么 首页和详情 要如此设计？**
-   所以 为什么存在 滑动冲突？
-   那么 如何解决 这些问题？
-   综上

## 为什么存在 滑动 的设计？

因为 **人们有 浏览信息 的需求**；

并且，**移动设备 屏幕空间较小**，需要使内容可滑动，来实现更大的信息传播量。

关于第一点，其实很好理解，回想一下人们使用移动设备的动机 —— 是的，多是 **漫无目的地浏览 以打发时间**，或是 **如饥似渴地阅读 以增长见识**。

关于第二点，你或许可以反驳，因为就像书籍一样，软件是可以做成翻页的，即，点击按钮，自动翻到下一页，同样能够确保更大的信息量。

> **那为什么要存在 滑动 操作呢？**

因为 —— 还记得 “上一篇末尾” 我们分享的 **屡试不爽的 用户体验目标** 吗 —— 因为滑动 **更符合用户直觉**，滑动 **能够维持操作的连贯性、不打断用户的意图、让用户感觉爽** —— ©KunMinX。

> 👆👆👆 划重点

如果这么说 并没有体会的话，那还是上一篇提到的：**要结合用户使用场景、揣摩用户的 “意图” 和 “心态”，如此才能明白 什么对用户来说是最爽的**。（下文我们会详细交待）

此外，正因为用户多数时间是 “漫无目的地浏览” 以打发时间，所以 **与滑动最紧密相关的，不外乎就是以下两个场景：首页和详情**。

> 👆👆👆 划重点

于是

## 为什么 首页和详情 要如此设计？

还是回到 刚才提到的 屡试不爽的 用户体验目标：**维持连贯性**。

> 首先 我们来看看 首页的设计

—— 为什么像 AppStore 这种，首页要设计成 列表嵌套 Banner 呢？

动图演示

截图1

截图2

![](https://images.xiaozhuanlan.com/photo/2019/642b18d120264c82f7a5a9e783fa1e18.gif)

![](https://images.xiaozhuanlan.com/photo/2019/142c2986dbccef08940f077139a09e35.png)

![](https://images.xiaozhuanlan.com/photo/2019/cc2784f492d2688cbad586b8898611a5.png)

> 图片截自 “Google Play” 客户端

因为在这种场景下，用户通常是 **漫无目的地浏览**、心里想的是 贪得无厌地 大而全地 涉猎一遍、不放过 首页中 任何新奇有趣的东西，所以他们的意图是，**把首页的内容给 “消灭掉”**，

所以，点击进入详情页 对他们来说，**会把工作量指数级增加、会让消灭首页的目标被打断**（因为详情页里面还有更多的软件在推荐，**根本看不过来**），

> 所以在这种场景下，为什么存在 列表嵌套 Banner 的设计 ——

就是为了 让用户不用点击 “查看更多” 增加工作量、而是 保持在首页、并且 **光是通过横向滑动 就能把最值得看的 TOP 20 给浏览一遍**，

如此，既通过 **延续了滑动操作 维持了连贯性**，又让用户保持在首页 而 **没有页面跳转的打断，再次维持了连贯性**，

> —— Double Kill

至此，**从交互设计、用户体验 —— 这个最根源的角度**，我们确知了为什么存在 “列表嵌套 Banner ” 的设计。

> 然后，我们再来看看 详情页

—— 为什么 详情页 多是设计成 **顶部盛放 多媒体控件、中间是 TabLayout、底部是 ViewPager 嵌套 RecyclerView** 呢？

动图演示

截图1

截图2

![](https://images.xiaozhuanlan.com/photo/2019/fd2aab6cfbae67a26241350407c70ded.gif)

![](https://images.xiaozhuanlan.com/photo/2019/b1084db0e22a446a980c7a9cc9c5d4d0.png)

![](https://images.xiaozhuanlan.com/photo/2019/4224b33cc51483c3f7c13c80eb50b3ac.png)

> 图片截自 “酷安” 客户端

先说说顶部。因为 **在列表页 查看 Item 标题 是很心累的**（点击查看内容 有失望的成本，所以需要用心筛选），千篇一律的文字，好不容易找到心仪的，想点进来，那么 此时 **详情页顶部 提供的多媒体元素（例如图片），好比给了用户一个奖励**，

—— 因为 “**一图胜千言**”，图片不像 文字需要通过揣摩来形成画面感，**图片是一看就懂，是给大脑减负、是给大脑的安慰奖励**。

> 👆👆👆 划重点

但除了心理因素外，顶部多媒体元素 没有别的实际作用，因此当它们属于次要元素的情况、当用户开始决定 从底部列表 寻找答案时，**顶部的元素会被顶上去**，暂时隐藏。

> 👆👆👆 划重点

那中部的 TabLayout 为什么被设计为 **粘性浮动** 的呢？

**还是因为连贯性**。

因为 Tab 意味着有多个栏目，例如 详情简介、点赞列表、评论列表 等，那么当用户 **在滑动列表的途中 如果想要切换 Tab**，却因为看不见 Tab 标题 而要 **专门折回顶部去确认**，那就会打断连贯性、让人很不爽。

> 👆👆👆 划重点

所以至此，从用户体验的角度，我们完整确立了对 「为什么 **首页会有 列表嵌套 Banner**、而 **详情会有 多媒体顶部 + 粘性 TabLayout + 底部 ViewPager 嵌套 RecyclerView** 的设计」的认识。

而 **正是这些 优秀的用户体验设计，造成了 从技术角度来看 的滑动冲突**。

> 👆👆👆 划重点

## 所以 为什么存在 滑动冲突？

因为，**早些时候**，

> **为了实现 良好用户体验 的首页**，我们会设计为：RecyclerView 嵌套作为 Adapter Item 的 ViewPager，而二者都是可滑动的控件。
> 
> **为了实现 良好用户体验 的详情**，我们会设计为：ScrollView 嵌套一个 LinearLayout 然后嵌套 顶部 ImageView、中部 TabLayout、底部 ViewPager，以及 ViewPager 中再嵌套 RecyclerView，如此，相当于 ScrollView 嵌套 ViewPager 嵌套 RecyclerView。

所以，到此为止我们确立了，**正是 优秀用户体验 要求的连贯性，导致 可滑动控件 的 多重嵌套 的 设计，从而导致的滑动冲突**。

## 那么 如何解决这些问题呢？

如果解决滑动冲突 非要掌握事件分发不可，那如此普适的用户体验的实现，岂不是 **十分容易出错、并且只掌握在极少数人的手中？**

换言之，正因为 **该用户体验 是如此地普适**，乃至于 **因它而起的 滑动冲突的解决**，必然是有 **超级简单的解决方案** 的！

> 👆👆👆👆👆👆👆👆👆👆 划重点！！！

例如，列表嵌套 Banner 的这种，RecyclerView 自身已解决了 与嵌套视图的滑动冲突，加上现如今 无论是 Banner 还是 ViewPager2，都是采用 RecyclerView + SnapHelper 的实现，双重保证 滑动冲突的不存在。

而像详情页这种，早在 2015 年，Google I/O 推出的 Material Design 套件就给出了 对应的解决方案：通过 CoordinateLayout + AppBarLayout + CollapsingToolbarLayout 来 **完美 协调和解决 滑动冲突、粘性浮动** 等问题。

具体这些控件的使用，我就不细讲了，这里我在 GitHub 上为你找到了 优质的源码 来参考学习：

> 对于 首页 的情况：
> 
> [https://github.com/zhimaochen/SnapHelperDemo](https://github.com/zhimaochen/SnapHelperDemo)
> 
> 对于 详情 的情况：（见 ComplexDetailsPageFragment）
> 
> [https://github.com/xuexiangjys/XUI](https://github.com/xuexiangjys/XUI)

上述两种方案针对的是，**首页、详情**，以及它们的 **变种页面** 的滑动冲突解决方案，

那么除此之外，在 **不去了解 事件分发** 的情况下，还有没有 **通用的 滑动冲突解决方案** 呢？

> 有！同样是在 Android 5.0，引入了 NestedScrollingParent 和 NestedScrollingChild，并在 Android 8.0 的 NestedScrollingParent2 和 NestedScrollingChild2 中解决了滑动延续的问题。
> 
> [https://github.com/sangxiaonian/EasyRefrush](https://github.com/sangxiaonian/EasyRefrush)

我的原则就是 帮大家无痛地理解缘由，至于具体控件的使用，我相信 **在有了上述感性认知、在消除了心中的迷雾后，根本不再是问题**。

## 综上

人们 **年复一年地未能掌握** 滑动冲突，是因为 **从未想明白过**，滑动冲突是怎么回事，

而这又是因为，滑动冲突 **根源的根源，不在技术，而在于产品设计**。

所以，在深度思考 用户在 **使用移动设备的意图** 后，我们知道了 为什么会有 滑动的设计，

并且在 这样的用户意图 背景下，确知了 **最普适的两大场景是 首页和详情**，

而在基于对 作为用户体验目标之一 的 **维持连贯性** 有了深入的理解后，我们理解了为什么会有这样的交互设计，

至此，我们才得以确知：

> 1.正是这样的交互设计，加上事件分发的机制，造成了滑动冲突，
> 
> 2.并且 正由于 首页和详情 是 **两大普适的场景**，使得我们 **只要能 解决这两大场景** 的滑动冲突，就几乎算是 **搞定了绝大部分情况的** 滑动冲突。

于是，针对 首页的情况，我们知道了有 **RecyclerView** 和 **SnapHelper** 这种 **傻瓜式解决方案**。

针对 详情的情况，我们知道了有 **CoordinateLayout + AppBarLayout + CollapsingToolbarLayout** 这种 **傻瓜式解决方案**。

而对于普适的情况，我们知道了有 **NestedScrollingParent2** 和 **NestedScrollingChild2** 这种 **高级一点的 傻瓜式解决方案**。就算不懂事件分发，也能依靠这个来 **绝不含糊地处理 滑动冲突。**

> 是的，整个事情的 **来龙去脉** 就是如此，滑动冲突的场景 **如此地普适**、而 解决方案 又是 **如此之简单**、且 解决滑动冲突 就像是 **解决了 进阶路上的大块头**

—— 是如此 **高性价比** 的知识点

> 👆👆👆👆👆👆👆👆👆👆 划重点！！！

现在你还会犹豫吗？

> **便捷链接：**
> 
> **[基本功：是随时随地可受用的 深度思考原则](https://xiaozhuanlan.com/topic/9837051426)**
> 
> [GitHub : 重学安卓 配套项目](https://github.com/KunMinX/Relearn-Android)
> 
> [GitHub : Jetpack-MVVM-Best-Practice](https://github.com/KunMinX/Jetpack-MVVM-Best-Practice)
> 
> **视图系列文章：**
> 
> [重学安卓：从 0 到 1 “自定义视图” 完整爬坑顺序](https://xiaozhuanlan.com/topic/9361075842)
> 
> [重学安卓：滑动冲突 的快乐你不懂！](https://xiaozhuanlan.com/topic/8796215034)
> 
> [重学安卓：不如我们 从零开始设计一套 视图系统](https://xiaozhuanlan.com/topic/0162375948)
> 
> [重学安卓：百闻不如一见的 视图系统 架构全貌](https://xiaozhuanlan.com/topic/6420935178)
> 
> **[重学安卓：过目难忘 Android GUI 关系梳理](https://xiaozhuanlan.com/topic/2073915486)**
> 
> [重学安卓：一通百通 “声明式 UI” 扫盲干货](https://xiaozhuanlan.com/topic/2356748910)

## 版权声明

> Copyright © 2019-present KunMinX

**本文为专栏私有内容，谢绝转载**。

读者订阅了专栏，即享有了专栏文章的阅读权。

文章 **原创的引言、切入点、思路、结论** 凝聚了作者 KunMinX 本人的心血 及与参与者互动演化的结果，作者本人及作者在文中提名的有效贡献者 对相应的成果享有所有权。

**当您 借鉴或引用文中的引言、切入点、思路、结论 进行二次创作并打算发行时，须注明链接出处**，否则我们保留追责的权利。对此如有疑虑请及时沟通，或在发行前将作品交由本人核对。

当您看见有人 [洗稿](https://baike.baidu.com/item/%E6%B4%97%E7%A8%BF/20862574?fr=aladdin)、[剽窃](https://baike.baidu.com/item/%E5%89%BD%E7%AA%83/9398357?fr=aladdin)、未经授权转载本专栏的文章内容时，请及时向本人举报。

最后感谢您对专栏内容的阅读和喜欢。
